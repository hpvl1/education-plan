import{Q as f}from"./QSelect.e814d2f7.js";import{Q as w}from"./QBtn.483e7fa1.js";import{Q as P}from"./use-key-composition.24402a4d.js";import{_ as V,q as y,r as c,s as j,t as N,u as q,U as a,x as d}from"./index.230554ec.js";import"./use-model-toggle.4f3b5810.js";import"./scroll.063f982f.js";const F=y({name:"AssignEducationPlanPage",components:{},async setup(){async function e(){const o="http://192.168.5.44/api/eduplan/list/";let s={};return await fetch(o).then(l=>l.json()).then(l=>{s=l}),s=JSON.parse(s),s}const t=await e(),i=Object.values(t.result);let p=[];i.forEach(function(o){p.push({label:o.name,value:o.id})});async function m(){const o="http://192.168.5.44/api/users/list/";let s={};return await fetch(o).then(l=>l.json()).then(l=>{s=l}),s=JSON.parse(s),s}const v=await m(),n=Object.values(v.result);let r=[];n.forEach(function(o){r.push({label:o.name,value:o.id})}),console.log(r);const S=c(r);async function O(){const o="http://192.168.5.44/api/users/cohortList/";let s={};return await fetch(o).then(l=>l.json()).then(l=>{s=l}),s=JSON.parse(s),s}const g=await O(),U=Object.values(g.result);let h=[];U.forEach(function(o){h.push({label:o.name,value:o.id})});const C=c(h);return{eduPlanSelect:c(null),userSelect:c(null),cohortSelect:c(null),planOptions:p,userOptions:r,cohortOptions:h,cohortOptionsShow:C,userOptionsShow:S,async sendData(o,s){try{let l={};const b=await fetch(s,{method:"post",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(u=>u.json()).then(u=>{l=u});console.log(JSON.stringify(o)),l=JSON.parse(l)}catch(l){console.log(l)}},filterFn(o,s,l){s(()=>{const b=o.toLowerCase();S.value=r.filter(u=>u.label.toLowerCase().indexOf(b)>-1)})}}},methods:{submitCohort(e,t){if(console.log(e.value,t.value),e&&t){let i={planId:t.value,cohortId:e.value};this.sendData(i,"http://192.168.5.44/api/eduplan/assignCohort/")}else alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043B\u0430\u043D \u0438 \u0433\u0440\u0443\u043F\u043F\u0443!")},submitUser(e,t){if(e&&t){let i={planId:t.value,userId:e.value};this.sendData(i,"http://192.168.5.44/api/eduplan/assignUser/")}else alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043B\u0430\u043D \u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F!")}}}),k=a("h3",null,"\u0417\u0430\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0432 \u043F\u043B\u0430\u043D",-1),J={class:"q-ma-md"},L={class:"column q-ma-md"},Q={class:"row"},$={class:"col-3"},D={class:"row q-mt-md"},E={class:"row q-mt-md"};function B(e,t,i,p,m,v){return j(),N(P,null,{default:q(()=>[k,a("div",J,[a("div",L,[a("div",Q,[a("div",$,[d(f,{filled:"",modelValue:e.eduPlanSelect,"onUpdate:modelValue":t[0]||(t[0]=n=>e.eduPlanSelect=n),options:e.planOptions,label:"\u0423\u0447\u0435\u0431\u043D\u044B\u0439 \u043F\u043B\u0430\u043D"},null,8,["modelValue","options"])])]),a("div",D,[d(f,{filled:"","use-input":"",behavior:"dialog",modelValue:e.userSelect,"onUpdate:modelValue":t[1]||(t[1]=n=>e.userSelect=n),"fill-input":"","hide-selected":"",onFilter:e.filterFn,options:e.userOptionsShow,label:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C",hint:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0438\u043C\u0443\u043C 2 \u0441\u0438\u043C\u0432\u043E\u043B\u0430"},null,8,["modelValue","onFilter","options"]),d(w,{class:"q-ma-md",color:"white","text-color":"black",label:"\u0417\u0430\u0447\u0438\u0441\u043B\u0438\u0442\u044C",onClick:t[2]||(t[2]=n=>e.submitUser(e.userSelect,e.eduPlanSelect))})]),a("div",E,[d(f,{filled:"","use-input":"",behavior:"dialog",modelValue:e.cohortSelect,"onUpdate:modelValue":t[3]||(t[3]=n=>e.cohortSelect=n),"fill-input":"","hide-selected":"",onFilter:e.filterFn,options:e.cohortOptionsShow,label:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C",hint:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0438\u043C\u0443\u043C 2 \u0441\u0438\u043C\u0432\u043E\u043B\u0430"},null,8,["modelValue","onFilter","options"]),d(w,{class:"q-ma-md",color:"white","text-color":"black",label:"\u0417\u0430\u0447\u0438\u0441\u043B\u0438\u0442\u044C",onClick:t[4]||(t[4]=n=>e.submitCohort(e.cohortSelect,e.eduPlanSelect))})])])])]),_:1})}var H=V(F,[["render",B]]);export{H as default};
